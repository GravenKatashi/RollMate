<div class="session-detail-container">
  <div class="header-section">
    <div class="header-content">
      <div class="dashboard-title">Dashboard</div>
      <div class="header-right">
        <div class="user-info" routerLink="/profile">
          <div class="user-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="7" r="4" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="user-text">
            <div class="user-name">Student Lorem Ipsum</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="main-content">
    <div class="content-wrapper">
      <button class="back-button" (click)="goBack()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 12H5M12 19l-7-7 7-7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Back to Classroom</span>
      </button>

      <div class="session-info-panel">
        <div class="session-title-large">{{ session?.topic }}</div>
        <div class="session-info-row">
          <div class="session-info-item">
            <div class="session-info-label">Date</div>
            <div class="session-info-value">{{ session?.date | date:'fullDate' }}</div>
          </div>
          <div class="session-info-item">
            <div class="session-info-label">Time Created</div>
            <div class="session-info-value">{{ session?.time_created | date:'short' }}</div>
          </div>
          <div class="session-info-item">
            <div class="session-info-label">Status</div>
            <div class="session-status-badge" [ngClass]="session?.is_open ? 'status-open' : 'status-closed'">
              {{ session?.is_open ? 'Open' : 'Closed' }}
            </div>
          </div>
        </div>
      </div>

      <div class="students-panel">
        <div class="students-header">
          <div class="students-title">Enrolled Students</div>
          <div class="sort-controls">
            <span class="sort-label">Sort by:</span>
            <select class="sort-select" [(ngModel)]="sortBy" (change)="onSortChange()">
              <option value="name">Last Name</option>
              <option value="status">Status</option>
            </select>
          </div>
        </div>

        <div class="students-table">
          <div class="table-headers">
            <div class="table-header-group">Student Name</div>
            <div class="table-header-group">Status</div>
            <div class="table-header-group">Time Present</div>
            <div class="table-header-group">Actions</div>
          </div>

          <div class="students-list">
            <div *ngFor="let student of sortedStudents" class="student-row">
              <div class="student-cell student-name">{{ getFullName(student) }}</div>
              <div class="student-cell">
                <span class="status-badge" [ngClass]="getStatusClass(student.attendance.status)">
                  {{ student.attendance.status | titlecase }}
                </span>
              </div>
              <div class="student-cell time-present">{{ student.attendance.time_present || '-' }}</div>
              <div class="student-cell">
                <div class="action-buttons">
                  <button class="action-btn btn-present"
                          (click)="updateStatus(student.id, 'present')"
                          [disabled]="student.attendance.status === 'present'">
                    Present
                  </button>
                  <button class="action-btn btn-late"
                          (click)="markLate(student.id)"
                          [disabled]="student.attendance.status === 'late'">
                    Late
                  </button>
                  <button class="action-btn btn-absent"
                          (click)="updateStatus(student.id, 'absent')"
                          [disabled]="student.attendance.status === 'absent'">
                    Absent
                  </button>
                </div>
              </div>
            </div>
            <div *ngIf="sortedStudents.length === 0" class="student-row">
              <div class="student-cell" style="grid-column: 1 / -1; text-align: center; padding: 32px; color: #666666;">
                No students enrolled in this classroom
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

